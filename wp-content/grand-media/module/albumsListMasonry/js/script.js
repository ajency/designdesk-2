function codeasily_albumsListMasonrr_module(){function w(){this._device=function(){var a=window,c=a.navigator.userAgent,e={ios:!1,android:!1,androidChrome:!1,desktop:!1,windows:!1,iphone:!1,ipod:!1,ipad:!1,cordova:a.cordova||a.phonegap,phonegap:a.cordova||a.phonegap},d=c.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),g=c.match(/(Android);?[\s\/]+([\d.]+)?/),f=c.match(/(iPad).*OS\s([\d_]+)/),n=c.match(/(iPod)(.*OS\s([\d_]+))?/),h=!f&&c.match(/(iPhone\sOS|iOS)\s([\d_]+)/);d&&(e.os="windows",e.osVersion=
d[2],e.windows=!0);g&&!d&&(e.os="android",e.osVersion=g[2],e.android=!0,e.androidChrome=0<=c.toLowerCase().indexOf("chrome"));if(f||h||n)e.os="ios",e.ios=!0;h&&!n&&(e.osVersion=h[2].replace(/_/g,"."),e.iphone=!0);f&&(e.osVersion=f[2].replace(/_/g,"."),e.ipad=!0);n&&(e.osVersion=n[3]?n[3].replace(/_/g,"."):null,e.iphone=!0);e.ios&&e.osVersion&&0<=c.indexOf("Version/")&&"10"===e.osVersion.split(".")[0]&&(e.osVersion=c.toLowerCase().split("version/")[1].split(" ")[0]);e.desktop=!(e.os||e.android||e.webView);
e.webView=(h||f||n)&&c.match(/.*AppleWebKit(?!.*Safari)/i);e.os&&"ios"===e.os&&(c=e.osVersion.split("."),d=document.querySelector('meta[name="viewport"]'),e.minimalUi=!e.webView&&(n||h)&&(7===1*c[0]?1<=1*c[1]:7<1*c[0])&&d&&0<=d.getAttribute("content").indexOf("minimal-ui"));e.pixelRatio=a.devicePixelRatio||1;return e}();this._mouseDetected=!1;var a=function(b){window.removeEventListener("mousedown",a,!1);window.removeEventListener("touchstart",a,!1);"touchstart"==b.type?(b.stopPropagation(),this._mouseDetected=
!1):this._mouseDetected=!0};window.addEventListener("mousedown",a,!1);window.addEventListener("touchstart",a,!1);this.cacherItemsList=this.CacheItemsList()}function x(a){this.delegate=a;this.appName=a.appName;this.id=this.appName+"_tag_";this.view=document.createElement("div");this.view.className="gmedia_AlbumsListMasonry_CollectionTagsCloud";this.list=document.createElement("ul");this.view.appendChild(this.list)}function m(a,b,c){this.delegate=a;this.query=c;this.appName=b;this.query.per_page=0;
this.query.page=1;this.properties=void 0;this.itemsList=[];this.filteredList=[];this.presentedList=[];this.page_Amount=0;this.scrollHandler=this.currentPage=void 0;this.terms=[];this.term=void 0;this.lastPageItems=[];this.tagsCloud=d(this.appName).tagsFilter?{0:d(this.appName).tagCloudAll}:void 0;this._filter=0;this.view=document.createElement("div");this.header=document.createElement("div");this.content=document.createElement("div");this.footer=document.createElement("div");this.tagsCloudView=void 0;
this.header.className="gmedia_header";this.content.className="gmedia_content";this.footer.className="gmedia_footer";this.header.style.padding="0 "+d(b).thumbSpacing/2+"px";this.content.style.paddingBottom=d(b).thumbSpacing+"px";this.view.appendChild(this.header);this.view.appendChild(this.content);this.view.appendChild(this.footer);this.resizeTimeOut=void 0;this.viewWidth=0;d(this.appName).appEventManager.addGMEventListener(h.COLLECTION_DATA_REDY,this,"dataLoaded");this.delegate.itemMenuConstructor&&
(a={},a.backgroundColor=d(this.appName).collectionThumbSubMenuBackgroundColor,a.backgroundColorOver=d(this.appName).collectionThumbSubMenuBackgroundColorOver,a.iconColor=d(this.appName).collectionThumbSubMenuIconColor,a.iconColorOver=d(this.appName).collectionThumbSubMenuIconHoverColor,this.itemMenu=this.delegate.itemMenuConstructor(this.delegate,f,a,!1))}function y(a,b){this.delegate=a;this.appName=a.appName;this.index=b;this.thumbSize=f.Size(0,0);this.view=document.createElement("div");this.view.className=
"gmedia_AlbumsListMasonry_MasonryCollection_Item";this.space=d(this.appName).thumbSpacing/2+"px";this.view.style.padding=this.space;this.view.style.fontSize=d(this.appName).collectionThumbFontSize+"px";this.view.style.color=d(this.appName).collectionThumbTitleColor;this._display=this.opacityDelay=void 0;this._opacity=0;this.imgCompleted=!1}function u(a,b,c){m.apply(this,arguments);this.view.className="gmedia_AlbumsListMasonry_MasonryCollection";this.columnsArr=[];this.columnsHeightsArr=[]}function z(a,
b){this.term=a;this.delegate=b;this.appName=b.appName;var c=this;this.view=document.createElement("div");this.view.className="gmedia_AlbumsListMasonry_TermCollection";this.animeBG=document.createElement("div");this.animeBG.className="gmAlbumsAnimeBG";this.animeBG.style.backgroundColor=f.hexToRgbaStrin(d(c.appName).collectionBgColor,1);this.view.appendChild(this.animeBG);this.removing=!1;this.header=document.createElement("div");this.header.className="gmAlbumsTermHeader";this.header.style.backgroundColor=
f.hexToRgbaStrin(d(this.appName).collectionHeaderBgColor,1);a.name&&(this.title=document.createElement("div"),this.title.className="gmAlbumsTitle",this.title.style.color=f.hexToRgbaStrin(d(this.appName).collectionHeaderTitleTextColor,1),this.title.innerHTML=this.term.name+"&#8192;&bull;&#8192;"+this.term.count,this.header.appendChild(this.title));a.description&&(b=document.createElement("div"),b.className="gmAlbumsDescription",b.style.color=f.hexToRgbaStrin(d(this.appName).collectionHeaderTextColor,
1),b.innerHTML=a.description,this.header.appendChild(b));if(a.sharelink&&d(this.appName).collectionShareButtons){b=function(a){var b=this.getElementsByTagName("svg")[0];switch(a.type){case "mouseover":b.style.fill=d(c.appName).collectionShareButtonsIconHoverColor;break;case "mouseout":b.style.fill=d(c.appName).collectionShareButtonsIconColor}};var e=function(b){b="menubar=no,toolbar=no,resizable=yes,scrollbars=yes, top=200, left="+(screen.width-600)/2+", height=450,width=600";switch(this.title){case "Facebook":window.open("https://www.facebook.com/share.php?u="+
a.sharelink,"",b);break;case "Twitter":window.open("https://twitter.com/intent/tweet?text="+encodeURI(a.name)+"&url="+a.sharelink,"",b);break;case "Pinterest":window.open("http://www.pinterest.com/pin/create/button/?url="+a.sharelink+"&media="+(a.thumbnail?a.thumbnail:"")+"&description="+encodeURI(a.name),"",b)}},k=document.createElement("div");k.className="gmAlbumsShareMenu";var g=document.createElement("div");g.className="gmAlbumsShareButton";g.setAttribute("title","Facebook");g.innerHTML='<svg enable-background="new 0 0 32 32" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Flat_copy"><path d="M11.848,32h6.612V15.998h4.411l0.584-5.514H18.46l0.007-2.761c0-1.437,0.137-2.209,2.2-2.209h2.757V0h-4.412   c-5.299,0-7.164,2.675-7.164,7.174v3.311H8.545v5.515h3.303V32z"/></g></svg>';
g.style.fill=d(this.appName).collectionShareButtonsIconColor;g.addEventListener("click",e);g.addEventListener("mouseover",b);g.addEventListener("mouseout",b);k.appendChild(g);g=document.createElement("div");g.className="gmAlbumsShareButton";g.setAttribute("title","Twitter");g.innerHTML='<svg version="1.1" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M30 7.3c-1 .5-2.1.8-3.3.9 1.2-.7 2.1-1.8 2.5-3.2-1.1.7-2.3 1.1-3.6 1.4-1-1.1-2.5-1.8-4.2-1.8-3.2 0-5.7 2.6-5.7 5.7 0 .5.1.9.1 1.3-4.8-.2-9-2.5-11.8-6-.5.9-.8 1.9-.8 3 0 2 1 3.8 2.6 4.8-.9 0-1.8-.3-2.6-.7v.1c0 2.8 2 5.1 4.6 5.6-.5.1-1 .2-1.5.2-.4 0-.7 0-1.1-.1.7 2.3 2.9 3.9 5.4 4-2 1.5-4.4 2.5-7.1 2.5-.5 0-.9 0-1.4-.1 2.5 1.6 5.6 2.6 8.8 2.6 10.6 0 16.3-8.8 16.3-16.3v-.7c1.1-1 2-2 2.8-3.2z"></path></svg>';
g.style.fill=d(this.appName).collectionShareButtonsIconColor;g.addEventListener("click",e);g.addEventListener("mouseover",b);g.addEventListener("mouseout",b);k.appendChild(g);g=document.createElement("div");g.className="gmAlbumsShareButton";g.setAttribute("title","Pinterest");g.innerHTML='<svg version="1.1" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M16 3c-7.2 0-13 5.8-13 13 0 5.5 3.4 10.2 8.3 12.1-.1-1-.2-2.6 0-3.7.2-1 1.5-6.5 1.5-6.5s-.4-.8-.4-1.9c0-1.8 1-3.2 2.4-3.2 1.1 0 1.6.8 1.6 1.8 0 1.1-.7 2.8-1.1 4.3-.3 1.3.6 2.3 1.9 2.3 2.3 0 4.1-2.4 4.1-6 0-3.1-2.2-5.3-5.4-5.3-3.7 0-5.9 2.8-5.9 5.6 0 1.1.4 2.3 1 3 .1.1.1.2.1.4-.1.4-.3 1.3-.4 1.5-.1.2-.2.3-.4.2-1.6-.8-2.6-3.1-2.6-5 0-4.1 3-7.9 8.6-7.9 4.5 0 8 3.2 8 7.5 0 4.5-2.8 8.1-6.7 8.1-1.3 0-2.6-.7-3-1.5 0 0-.7 2.5-.8 3.1-.3 1.1-1.1 2.5-1.6 3.4 1.2.4 2.5.6 3.8.6 7.2 0 13-5.8 13-13 0-7.1-5.8-12.9-13-12.9z"></path></svg>';
g.style.fill=d(this.appName).collectionShareButtonsIconColor;g.addEventListener("click",e);g.addEventListener("mouseover",b);g.addEventListener("mouseout",b);k.appendChild(g);this.shareMenu=k;this.header.appendChild(this.shareMenu)}b=document.createElement("div");b.setAttribute("title","Close (Esc)");b.className="gmAlbumsCloseButton";b.innerHTML='<svg height="512px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';
var l=b.childNodes[0];l.style.fill=d(this.appName).collectionShareButtonsIconColor;b.addEventListener("mouseover",function(){l.style.fill=d(c.appName).collectionShareButtonsIconColor});b.addEventListener("mouseout",function(){l.style.fill=d(c.appName).collectionShareButtonsIconHoverColor});b.addEventListener("click",function(){c.prepareToRemove()});this.closeButton=b;this.header.appendChild(this.closeButton);this.view.appendChild(this.header);this.content=document.createElement("div");this.content.className=
"gmAlbumsTermContent";f.miniScreen&&this.content.classList.add("miniScreen");this.content.style.backgroundColor=f.hexToRgbaStrin(d(c.appName).collectionBgColor,1);this.view.appendChild(this.content);this.fixedHeader=document.createElement("div");this.fixedHeader.className="gmAlbumsTermHeaderFixed";this.fixedHeader.style.backgroundColor=f.hexToRgbaStrin(d(this.appName).collectionHeaderBgColor,1);this.view.appendChild(this.fixedHeader);this.startPositionY=window.pageYOffset||document.documentElement.scrollTop;
this.windowScrollY=window.scrollY;this.windowWidth=0;this.viewCompleted=!1;this.bodyElements=[];this.bodyElementsStyle=[];this.isShowFixedHeder=!1;this.gallery=this.scrollHandler=void 0;this.addToStage()}function v(a){var b=this;this.term=a;this.id=this.term.term_id;this.appName=this.term.appName;this._frame=f.Rect(0,0,0,0);this.view=document.createElement("div");this.view.className="gmedia_AlbumsListMasonry_Cover";this.view.id=this.term.key+"_"+this.id;this.mouseRender=void 0;this.rotationTransformY=
this.rotationTransformX=0;this.render=void 0;this.shareClick=!1;this.coumnter=this.title=this.coverImgSize=this.coverSrc=this.thumbImg=void 0;"gmedia_tag"!=this.term.taxonomy&&this.term.meta&&this.term.meta.cover&&(this.imgHolder=document.createElement("div"),this.imgHolder.className="gmedia_AlbumsListMasonry_CoverImgHolder",a=this.term.meta.cover,this.coverSrc=[],this.coverSrc[0]=a.itemViewThumbSrc,this.coverSrc[1]=a.itemViewSrc,this.thumbImg=new Image,f.Device.ios&&this.thumbImg.classList.add("gmiOS_optima"),
this.thumbImg.style.maxWidth="none",this.thumbImg.style.maxHeight="none",this.thumbImg.style.border="none",this.thumbImg.style.position="absolute",this.thumbImg.style.setProperty("max-width","none","!important"),this.thumbImg.style.setProperty("max-height","none","!important"),this.thumbImg.onload=function(a){b.thumbLoad(a)},this.imgHolder.appendChild(this.thumbImg),f.Device.ios&&this.imgHolder.classList.add("gmiOS_optima"),this.view.appendChild(this.imgHolder),this.view.style.backgroundImage="linear-gradient(45deg, "+
f.hexToRgbaStrin(d(this.appName).coverTitleBgColor1,d(this.appName).coverTitleBgAlpha)+","+f.hexToRgbaStrin(d(this.appName).coverTitleBgColor2,d(this.appName).coverTitleBgAlpha)+")",this.imgHolder||(c.style.opacity="1"));a=document.createElement("div");a.className="gmedia_AlbumsListMasonry_CoverHA";f.Device.ios&&a.classList.add("gmiOS_optima");var c=document.createElement("div");c.className="gmedia_AlbumsListMasonry_HoverBG";f.Device.ios&&c.classList.add("gmiOS_optima");c.style.backgroundImage="linear-gradient(45deg, "+
f.hexToRgbaStrin(d(this.appName).coverTitleBgColor1,d(this.appName).coverTitleBgAlpha)+","+f.hexToRgbaStrin(d(this.appName).coverTitleBgColor2,d(this.appName).coverTitleBgAlpha)+")";this.imgHolder||(c.style.opacity="1");this.hoverBG=c;a.appendChild(c);this.hoverArea=a;this.view.appendChild(a);c=document.createElement("div");c.className="gmedia_AlbumsListMasonry_CoverTitleHolder";this.hoverArea.appendChild(c);a=this.term.name;if("myCollection"==this.term.key||d(this.appName).coverTitleEnable){var e=
document.createElement("div");e.className="coverTitle";e.style.fontSize=d(this.appName).coverTitleFontSize+"px";e.style.color=f.hexToRgbaStrin(d(this.appName).coverTitleTextColor,1);e.innerHTML=a;this.title=e;c.appendChild(e)}d(this.appName).coverCollectoinAmount&&(a=document.createElement("div"),a.className="coverCounter",a.style.color=f.hexToRgbaStrin(d(this.appName).coverTitleTextColor,1),a.style.fontSize=d(this.appName).coverTitleFontSize/2+"px",a.innerHTML="- "+this.term.count+" -",this.coumnter=
a,c.appendChild(a));if("myCollection"==this.term.key||d(this.appName).coverSocialShareEnabled){var k=document.createElement("div");k.className="coverShareButton";k.innerHTML='<svg height="1792" viewBox="0 0 1792 1792" width="1792" xmlns="http://www.w3.org/2000/svg"><path d="M1344 1024q133 0 226.5 93.5t93.5 226.5-93.5 226.5-226.5 93.5-226.5-93.5-93.5-226.5q0-12 2-34l-360-180q-92 86-218 86-133 0-226.5-93.5t-93.5-226.5 93.5-226.5 226.5-93.5q126 0 218 86l360-180q-2-22-2-34 0-133 93.5-226.5t226.5-93.5 226.5 93.5 93.5 226.5-93.5 226.5-226.5 93.5q-126 0-218-86l-360 180q2 22 2 34t-2 34l360 180q92-86 218-86z"/></svg>';
k.getElementsByTagName("svg")[0].style.fill=f.hexToRgbaStrin(d(this.appName).coverTitleTextColor,1);k.addEventListener("mouseenter",function(){k.getElementsByTagName("svg")[0].style.fill=f.hexToRgbaStrin(d(b.appName).coverTitleBgColor1,1)},!1);k.addEventListener("mouseleave",function(){k.getElementsByTagName("svg")[0].style.fill=f.hexToRgbaStrin(d(b.appName).coverTitleTextColor,1);b.shareClick=!1},!1);k.addEventListener("mouseup",function(a){b.shareClick=!0;f.is_touch_device&&(k.getElementsByTagName("svg")[0].style.fill=
f.hexToRgbaStrin(d(b.appName).coverTitleTextColor,1))},!0);c.appendChild(k)}this.animationDelay=void 0;this.render=this.startRender();f.Device.ios||this.view.addEventListener("mouseenter",this.render,!1);this.view.addEventListener("click",function(a){b.showTermsCollectioHandler(a)},!1)}function A(a){this.delegate=a;this.appName=a.appName;this.coversList=[];this.view=document.createElement("div");this.view.className="gmedia_AlbumsListMasonry_SplashPage";this.view.id=this.appName+"_splashPage";this.viewWidth=
0;this.gmediaTemplate=void 0;a=document.getElementsByTagName("body")[0];for(var b=0;b<a.classList.length;b++)"gmedia-template"==a.classList[b]&&(this.gmediaTemplate=!0,b=a.classList.length)}function B(a,b,c){f.copyProperties(a,this);if(this.appApi&&(this.appName=b,this.appDiv=c,this.splashPage=this.audioPlayer=this.modal=void 0,a=this.settings,d(this.appName).appApi=this.appApi,d(this.appName).post_url=a.post_url,d(this.appName).galleryID="gm"+c.getAttribute("data-gmid"),d(this.appName).appEventManager=
f.GMEventsManager(),a&&(d(this.appName).lightBoxEnable="1"==a.lightBoxEnable?!0:!1,d(this.appName).bookmarkEnable="1"==a.bookmarkEnable?!0:!1,d(this.appName).splashPreloaderColor="#"+a.splashPreloaderColor,d(this.appName).columns=parseInt(a.columns),d(this.appName).thumbRecommendedSize=parseInt(a.thumbRecommendedSize),d(this.appName).coverThumbRatio=parseFloat(a.coverThumbRatio),d(this.appName).spaceX=parseInt(a.spaceX),d(this.appName).coverTitleForBookmark=a.coverTitleForBookmark,d(this.appName).coverTitleForPreferred=
a.coverTitleForPreferred,d(this.appName).coverTitleEnable="1"==a.coverTitleEnable?!0:!1,d(this.appName).coverHoverEffectEnable="1"==a.coverHoverEffectEnable?!0:!1,d(this.appName).coverTitleFontSize=parseInt(a.coverTitleFontSize),d(this.appName).coverTitleTextColor="#"+a.coverTitleTextColor,d(this.appName).coverCollectoinAmount="1"==a.coverCollectoinAmount?!0:!1,d(this.appName).coverSocialShareEnabled="1"==a.coverSocialShareEnabled?!0:!1,d(this.appName).coverTitleBgAlpha=parseInt(a.coverTitleBgAlpha)/
100,d(this.appName).coverTitleBgColor1="#"+a.coverTitleBgColor1,d(this.appName).coverTitleBgColor2="#"+a.coverTitleBgColor2,d(this.appName).collectionThumbRecomendedWidth=parseInt(a.collectionThumbRecomendedWidth),d(this.appName).thumbSpacing=parseInt(a.thumbSpacing),d(this.appName).collectionPreloaderColor="#"+a.collectionPreloaderColor,d(this.appName).collectionBgColor="#"+a.collectionBgColor,d(this.appName).collectionHeaderBgColor="#"+a.collectionHeaderBgColor,d(this.appName).collectionHeaderTitleTextColor=
"#"+a.collectionHeaderTitleTextColor,d(this.appName).collectionHeaderTextColor="#"+a.collectionHeaderTextColor,d(this.appName).collectionShareButtons="1"==a.collectionShareButtons?!0:!1,d(this.appName).collectionShareButtonsIconColor=a.collectionShareButtonsIconColor,d(this.appName).collectionShareButtonsIconHoverColor=a.collectionShareButtonsIconHoverColor,d(this.appName).collectionThumbHoverColor=a.collectionThumbHoverColor,d(this.appName).collectionThumbTitleShow="1"==a.collectionThumbTitleShow?
!0:!1,d(this.appName).collectionThumbTitleColor=a.collectionThumbTitleColor,d(this.appName).collectionThumbFontSize=parseInt(a.collectionThumbFontSize),d(this.appName).tagsFilter="1"==a.tagsFilter?!0:!1,d(this.appName).tagCloudAll=a.tagCloudAll,d(this.appName).tagCloudTextColor="#"+a.tagCloudTextColor,d(this.appName).tagCloudBgColor="#"+a.tagCloudBgColor,d(this.appName).collectionInfoEnable="1"==a.collectionInfoEnable?!0:!1,d(this.appName).collectionItemDownload="1"==a.collectionItemDownload?!0:!1,
d(this.appName).collectionItemDiscuss="1"==a.collectionItemDiscuss?!0:!1,d(this.appName).collectionSocialShareEnabled="1"==a.collectionSocialShareEnabled?!0:!1,d(this.appName).collectionLikesEnabled="1"==a.collectionLikesEnabled?!0:!1,d(this.appName).collectionThumbSubMenuBackgroundColor=a.collectionThumbSubMenuBackgroundColor,d(this.appName).collectionThumbSubMenuBackgroundColorOver=a.collectionThumbSubMenuBackgroundColorOver,d(this.appName).collectionThumbSubMenuIconColor=a.collectionThumbSubMenuIconColor,
d(this.appName).collectionThumbSubMenuIconHoverColor=a.collectionThumbSubMenuIconHoverColor,d(this.appName).modaBgColor=a.modaBgColor,d(this.appName).modalInfoBoxBgColor=a.modalInfoBoxBgColor,d(this.appName).modalInfoBoxTitleTextColor="#"+a.modalInfoBoxTitleTextColor,d(this.appName).modalInfoBoxTextColor="#"+a.modalInfoBoxTextColor,d(this.appName).infoBarTermsEnable="1"==a.infoBarTermsEnable?!0:!1,d(this.appName).infoBarTermsTitleColor="#"+a.infoBarTermsTitleColor,d(this.appName).infoBarTermsBackgroundColorAlbums=
"#"+a.infoBarTermsBackgroundColorAlbums,d(this.appName).infoBarTermsBackgroundColorTags="#"+a.infoBarTermsBackgroundColorTags,d(this.appName).infoBarTermsBackgroundColorCategories="#"+a.infoBarTermsBackgroundColorCategories,d(this.appName).infoBarExifEnable="1"==a.infoBarExifEnable?!0:!1,d(this.appName).infoBarCountersEnable="1"==a.infoBarCountersEnable?!0:!1,d(this.appName).infoBarDateInfoEnable="1"==a.infoBarDateInfoEnable?!0:!1,d(this.appName).shareTitlePlaceHolder=a.shareTitlePlaceHolder,d(this.appName).sliderThumbBarEnable=
"1"==a.sliderThumbBarEnable?!0:!1,d(this.appName).sliderThumbBarHoverColor=a.sliderThumbBarHoverColor,d(this.appName).sliderPreloaderColor="#"+a.sliderPreloaderColor,d(this.appName).sliderBgColor=a.sliderBgColor,d(this.appName).sliderHeaderFooterBgColor="#"+a.sliderHeaderFooterBgColor,d(this.appName).sliderNavigationColor=a.sliderNavigationColor,d(this.appName).sliderNavigationIconColor=a.sliderNavigationIconColor,d(this.appName).sliderItemTitleFontSize=parseInt(a.sliderItemTitleFontSize),d(this.appName).sliderItemTitleTextColor=
"#"+a.sliderItemTitleTextColor,d(this.appName).sliderThumbSubMenuBackgroundColor=a.sliderThumbSubMenuBackgroundColor,d(this.appName).sliderThumbSubMenuBackgroundColorOver=a.sliderThumbSubMenuBackgroundColorOver,d(this.appName).sliderThumbSubMenuIconColor=a.sliderThumbSubMenuIconColor,d(this.appName).sliderThumbSubMenuIconHoverColor=a.sliderThumbSubMenuIconHoverColor,d(this.appName).sliderInfoEnable="1"==a.sliderInfoEnable?!0:!1,d(this.appName).sliderItemDownload="1"==a.sliderItemDownload?!0:!1,d(this.appName).sliderItemDiscuss=
"1"==a.sliderItemDiscuss?!0:!1,d(this.appName).sliderSocialShareEnabled="1"==a.sliderSocialShareEnabled?!0:!1,d(this.appName).sliderLikesEnabled="1"==a.sliderLikesEnabled?!0:!1,d(this.appName).customCSS=a.customCSS),d(b)&&this.appQuery)){this.appDiv.style.position="relative";this.appDiv.style.height="auto";this.splashPage=new A(this);this.appDiv.appendChild(this.splashPage.view);this.splashPage.init();this.appDivWidth=this.appDiv.clientWidth;d(this.appName).appEventManager.addGMEventListener(h.EXT_SCRIPTS_READY,
this,"externalScriptsReady");b=d(this.appName).module_url+"/js/components/";c=D.slice(0);for(var e in c)c[e]=b+c[e];f.loadExtScripts(c,this,h.EXT_SCRIPTS_READY)}}w.prototype={moduleSettings:function(a){return window[a]&&window[a].settings?window[a].settings:null},get passiveListener(){return this.isPassiveListener()?{passive:!1,capture:!1}:!1},isPassiveListener:function(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveListener",null,
b)}catch(c){}return a},get requestAnimationFrame(){return window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame},get cancelAnimationFrame(){return window.cancelAnimationFrame||window.mozCancelAnimationFrame},get whichTransitionEventEnd(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==
b.style[a])return c[a]},get Device(){return this._device},get is_touch_device(){return navigator.maxTouchPoints||"ontouchstart"in window},get getScrollbarWidth(){var a=document.createElement("div");a.style.visibility="hidden";a.style.width="100px";a.style.msOverflowStyle="scrollbar";document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%";a.appendChild(c);c=c.offsetWidth;a.parentNode.removeChild(a);return b-c},get hasScrollbar(){if("number"===
typeof window.innerWidth)return window.innerWidth>document.documentElement.clientWidth;var a=document.documentElement||document.body;if("undefined"!==typeof a.currentStyle)var b=a.currentStyle.overflow;b=b||window.getComputedStyle(a,"").overflow;if("undefined"!==typeof a.currentStyle)var c=a.currentStyle.overflowY;c=c||window.getComputedStyle(a,"").overflowY;a=a.scrollHeight>a.clientHeight;var e=/^(visible|auto)$/.test(b)||/^(visible|auto)$/.test(c);return a&&e||"scroll"===b||"scroll"===c},get miniScreen(){return 500>
window.screen.height||500>window.screen.width},get mouseDetected(){return this._mouseDetected},get youTubeCode(){return'<iframe src="https://www.youtube.com/embed/%id%?rel=0&showinfo=0&autoplay=1&wmode=transparent" frameborder="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},get vimeoCode(){return'<iframe src="https://player.vimeo.com/video/%id%?byline=0&portrait=0&autoplay=1" frameborder="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},copyProperties:function(a,
b){for(var c in a)b[c]=a[c]},Rect:function(a,b,c,e){return{x:a,y:b,width:c,height:e}},Size:function(a,b){return{width:a,height:b}},Point:function(a,b){return{x:a,y:b}},findHighestZIndex:function(a){for(var b=99999,c=0;c<a.childNodes.length;c++){var e=a.childNodes[c];if(1==e.nodeType&&"SCRIPT"!=e.nodeName)var d=document.defaultView.getComputedStyle(e,null).getPropertyValue("z-index");d>b&&"auto"!=d&&(b=parseInt(d))}return b},timeConverter:function(a){a=new Date(1E3*a);var b=new Date,c=new Date(Date.now()-
864E5),e=a.getFullYear(),d="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[a.getMonth()],g=a.getDate(),f=a.getHours(),h=a.getMinutes();return a.setHours(0,0,0,0)==b.setHours(0,0,0,0)?"Today, "+f+":"+h:a.setHours(0,0,0,0)==c.setHours(0,0,0,0)?"Yesterday, "+f+":"+h:e==b.getFullYear()?g+" "+d+", "+e:g+" "+d+" "+e},createPreloaderView:function(a){var b=0,c=document.createElement("div");c.className="gmedia_v2_Preloader";var e=document.createElement("div");e.style.position="absolute";e.style.width=
"8px";e.style.height="8px";e.style.margin="-4px";e.style.left="50%";e.style.top="50%";e.style.borderRadius="50%";e.style.backgroundColor=a;c.appendChild(e);e=document.createElement("div");e.className="c-spinner";e.style.position="absolute";e.style.width="36px";e.style.height="36px";e.style.margin="-18px";e.style.left="50%";e.style.top="50%";for(var d=0;8>d;d++){var g=document.createElement("div");g.style.position="absolute";g.style.top="50%";g.style.left="50%";g.style.marginTop="-4px";g.style.marginLeft=
"-4px";g.style.width="8px";g.style.height="8px";g.style.backgroundColor=a;g.style.borderRadius="100%";g.style.transform="rotate("+b+"deg) translate(18px)";b+=45;e.appendChild(g)}c.appendChild(e);return c},trace:function(a){if(1==arguments.length)console.log(a);else{for(var b="",c=0;c<arguments.length;c++)b+=arguments[c]+", ";b=b.slice(0,-2);console.log(b)}},preventDefaultForScrollKeys:function(a){if({37:1,38:1,39:1,40:1}[a.keyCode])return a.preventDefault(),!1},preventDefault:function(a){a=a||window.event;
a.preventDefault&&a.preventDefault();a.returnValue=!1},disableBodyScroll:function(){document.getElementsByTagName("html")[0].classList.add("gmedia_PopUpActive")},enableBodyScroll:function(){document.getElementsByTagName("html")[0].classList.remove("gmedia_PopUpActive")},disableBodyScrollSlider:function(){window.addEventListener&&(window.addEventListener("wheel",this.preventDefault,this.passiveListener),window.addEventListener("mousewheel",this.preventDefault,this.passiveListener),window.addEventListener("touchmove",
this.preventDefault,this.passiveListener));document.onkeydown=this.preventDefaultForScrollKeys},enableBodyScrollSlider:function(){window.removeEventListener&&(window.removeEventListener("wheel",this.preventDefault,this.passiveListener),window.removeEventListener("mousewheel",this.preventDefault,this.passiveListener),window.removeEventListener("touchmove",this.preventDefault,this.passiveListener));document.onkeydown=null},collapseElementsInElemt:function(a,b){for(var c=[],e=0;e<a.childNodes.length;e++){var d=
{},g=a.childNodes[e];1==g.nodeType&&"SCRIPT"!=g.nodeName&&g!==b&&(d.element=g,d.height=null,d.overflow=null,""!=g.style.height&&(d.height=g.style.height),""!=g.style.overflow&&(d.overflow=g.style.overflow),c.push(d),g.style.overflow="hidden",g.style.height="0")}return c},recoverElements:function(a){if(0!=a.length)for(var b=0;b<a.length;b++){var c=a[b].element;c&&(a[b].overflow?c.style.overflow=a[b].overflow:c.style.removeProperty("overflow"),a[b].height?c.style.height=a[b].height:c.style.removeProperty("height"))}},
hexToRgbaStrin:function(a,b){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,b,d,g){return b+b+d+d+g+g});return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?"rgba("+parseInt(a[1],16)+","+parseInt(a[2],16)+","+parseInt(a[3],16)+","+b+")":null},getFrameForBoxWithMode:function(a,b,c){var e=a.width,d=a.height;a=b.width;b=b.height;c?c=Math.max(a/e,b/d):(c=Math.min(a/e,b/d),c=1<c?1:c);e=Math.round(e*c);d=Math.round(d*c);return this.Rect(Math.round((a-e)/2),Math.round((b-d)/2),e,d)},
getItemFrameByIndexForBox:function(a,b,c,e,d,g){var k=1;g&&(k=g);d=Math.min(b,d);d=Math.floor(b/d);b=1<d?(b-(d-1)*c)/d:b;k*=b;g=Math.ceil((a+1)/d)-1;return this.Rect((a-g*d)*(b+c),g*(k+e),b,k)},fadeOut:function(a,b,c){function e(){var k=(new Date).getTime()-g,f=k/c;1>f?(f=1-d(f),a.style.opacity=String(f),setTimeout(e,Math.min(25,c-k))):(a.style.opacity="0",b&&b())}c||(c=500);var d=Math.sqrt,g=(new Date).getTime();e()},ellipsizeTextBoxToLine:function(a,b){a.innerHTML=a.textContent||a.innerText||"";
var c=a.innerHTML,e=a.innerHTML.split(" ");a.innerHTML=e[0].substring(0,3);b*=a.clientHeight;for(a.innerHTML=c;a.clientHeight>b;)e.pop(),a.innerHTML=e.join(" ")+" ..."},ellipsizeTextBox:function(a){a.innerHTML=a.textContent||a.innerText||"";for(var b=a.innerHTML.split(" ");a.scrollHeight>a.offsetHeight;)b.pop(),a.innerHTML=b.join(" ")+" ..."},scrollToY:function(a,b){var c=window.pageYOffset,e=Math.PI/(b/15),d=c/2,g=0,f,h=setInterval(function(){window.pageYOffset>a?(g+=1,f=d-d*Math.cos(g*e),window.scrollTo(0,
c-f)):clearInterval(h)},15)},toggleFullScreen:function(a){var b=document.webkitIsFullScreen||document.mozFullScreen||!1;a.requestFullScreen=a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen||function(){return!1};document.cancelFullScreen=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||function(){return!1};b?document.cancelFullScreen():a.requestFullScreen()},loadExtScripts:function(a,b,c){for(var e=0,k=0;k<a.length;k++){var g=document.createElement("script");
g.src=a[k];g.async=!0;g.onload=g.onreadystatechange=function(){e+=1;e==a.length&&d(b.appName).appEventManager.dispatchGMEvent(f.GMEvent(c,self))};document.body.appendChild(g)}},CacheItemsList:function(){function a(){c.cached+=1;b(c.lastIndex+1>=c.itemsList.length?0:c.lastIndex+1)}function b(e){!c.itemsList||c.cached==c.itemsList.length&&!c.amount||c.amount&&c.cached>=c.amount||(c.amount&&(c.amount=Math.min(c.amount,c.itemsList.length)),c.currentItem=c.itemsList[e].webView,c.lastIndex=e,c.currentItem.complete?
(c.cached+=1,b(c.lastIndex+1>=c.itemsList.length?0:c.lastIndex+1)):c.currentItem.addEventListener("load",a,!1))}var c={cached:0,itemsList:void 0,currentItem:void 0,amount:void 0,lastIndex:void 0,init:function(e,d,g){c.currentItem&&c.currentItem.removeEventListener("load",a,!1);c.amount=g;c.cached=0;c.currentItem=void 0;c.lastIndex=d;c.itemsList=e;void 0===d&&(d=0);b(d)},status:function(){return{list:c.itemsList,index:c.lastIndex}}};return c},GMEventsManager:function(){return{_listenerSet:{},addGMEventListener:function(a,
b,c){this._listenerSet[a]||(this._listenerSet[a]=[]);this._listenerSet[a].push({listener:b,handler:c})},removeGMEventListener:function(a,b,c){if(this._listenerSet[a])for(var d=0;d<this._listenerSet[a].length;d++)this._listenerSet[a][d].listener==b&&this._listenerSet[a][d].handler==c&&(this._listenerSet[a].splice(d,1),d=this._listenerSet[a].length)},dispatchGMEvent:function(a){if(this._listenerSet[a.type])for(var b=this._listenerSet[a.type],c=0;c<b.length;c++){var d=b[c];if(d&&d.listener&&"function"==
typeof d.listener[d.handler])d.listener[d.handler](a)}}}},GMEvent:function(a,b,c){var d={};d.type=a;d.params=c;d.target=b;return d},request:function(a,b,c,d){var e=this,g=new XMLHttpRequest;g.open("POST",this.moduleSettings(b.appName).appApi,!0);g.onreadystatechange=function(){4==this.readyState&&(200!=this.status?c&&e.moduleSettings(b.appName).appEventManager.dispatchGMEvent(e.GMEvent(c,b,{error:this.statusText,params:d})):c&&e.moduleSettings(b.appName).appEventManager.dispatchGMEvent(e.GMEvent(c,
b,{data:this.responseText,params:d})))};g.onerror=function(e){1==confirm("Failed to load resource: The network connection was lost. Let's try again?")&&request(a,b,c,d)};try{g.send(a),e.moduleSettings(b.appName).appEventManager.dispatchGMEvent(e.GMEvent(h.REQUEST_START,b,null))}catch(l){e.trace(l)}},Item:function(a,b){var c={get webView(){if(this.webImg.src)return c.webImg;this.webImg.src=this.itemViewSrc;return this.webImg}};this.copyProperties(a,c);c.appName=b;c.idPrefix=void 0;c.webImg=new Image;
c.webImgFrame=this.Rect(0,0,0,0);c.webImg.addEventListener("load",function(){this.classList.add("onLoad")},!1);if(c.link&&""!=c.link){a=c.link;var d;a.match(/youtu\.be/i)||a.match(/youtube\.com/i)?(b=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&\?]*).*/,(a=a.match(b))&&11==a[7].length&&(d=a[7]),void 0!==d&&(c.mime_type="video/youtube",c.videoId=d,c.link=void 0)):a.match(/vimeo\.com/i)&&(b=/(www\.)?vimeo.com\/(\d+)($|\/)/,(a=a.match(b))&&(d=a[2]),void 0!==d&&(c.mime_type="video/vimeo",
c.videoId=d,c.link=void 0))}"audio/mpeg"==c.mime_type&&(c.type="audio");"image"==c.mime_type.split("/")[0]&&(c.type="image");"video"==c.mime_type.split("/")[0]&&(c.type="video");c.hasTag=function(a){if("all"==a)return!0;if(!c.tags||0==c.tags.length)return!1;for(var b=0;b<c.tags.length;b++)if(c.tags[b].term_id==a)return!0};c.itemViewSrc=c.meta?c.meta.web?c.meta.web.link:c.meta.original?c.meta.original.link:c.meta.thumb?c.meta.thumb.link:null:null;c.itemViewThumbSrc=c.meta?c.meta.thumb?c.meta.thumb.link:
c.meta.web?c.meta.web.link:null:null;c.itemViewSize=c.meta?c.meta.web?this.Size(c.meta.web.width,c.meta.web.height):c.meta.original?this.Size(c.meta.original.width,c.meta.original.height):this.Size(300,300):this.Size(300,300);c.itemViewThumbSize=c.meta?c.meta.thumb?this.Size(c.meta.thumb.width,c.meta.thumb.height):c.meta.web?this.Size(c.meta.web.width,c.meta.web.height):this.Size(300,300):this.Size(300,300);return c},Term:function(a,b){var c=this,d={set gmedia__in(a){this._query&&(this._query.gmedia__in=
a.toString(),this._gmedia_in=a,this.count=a.length,"myCollection"==this.taxonomy&&this._query&&(this.sharelink=c.moduleSettings(b).post_url+"/?"+c.moduleSettings(b).galleryID+"[gmedia__in]="+this._query.gmedia__in))},get gmedia__in(){return this._gmedia_in},get taxony_type(){switch(this.taxonomy){case "gmedia_album":return"albums";case "gmedia_category":return"categories";case "gmedia_tag":return"tags";case "myCollection":return"gmedia__in";default:return null}},get term_id(){return"myCollection"==
this.taxonomy?this.taxony_type+"-"+this.gmedia__in.toString():this._term_id},set term_id(a){this._term_id=a},get query(){var a=void 0,b;if("myCollection"==this.taxonomy)return b={orderby:"gmedia__in",order:"ASC",gmedia__in:this._gmedia_in.toString()};switch(this.taxonomy){case "gmedia_album":a="album__in";break;case "gmedia_category":a="category__in";break;case "gmedia_tag":a="tag__in"}b={per_page:0,admin:!1,page:1};b[a]=[this.term_id];return b}};this.copyProperties(a,d);a.term_id&&(d._term_id=a.term_id);
d.appName=b;d.key=void 0;d._gmedia_in=[];d.meta&&(a=this.Meta(d.meta,d.appName),d.meta=a);"gmedia_tag"==d.taxonomy&&(d.name="#"+d.name);"myCollection"==d.taxonomy&&d._query&&(d.gmedia__in=d._query.gmedia__in.split(","));return d},termDataByQueryNameId:function(a,b,c){if(!a.gmedia__in)return null;var d=a.gmedia__in.split(",").length,f=a.orderby,g=a.order;return{count:d,name:b,meta:{_order:g,_orderby:f,order:g,orderby:f},taxonomy:"myCollection",term_id:c,_query:a}},termsListFromAppQuery:function(a){var b=
[],c=void 0;if(a.album__in){var d=a.album__in.split(",");for(c in d)b.push({taxonomy_type:"albums",term_id:d[c]})}if(a.category__in)for(c in d=a.category__in.split(","),d)b.push({taxonomy_type:"categories",term_id:d[c]});if(a.tag__in)for(c in a=a.tag__in.split(","),a)b.push({taxonomy_type:"tags",term_id:a[c]});return 0<b.length?b:void 0},Meta:function(a,b){var c={};this.copyProperties(a,c);c.appName=b;c._cover&&(c._cover=this.Item(a._cover,c.appName));a=c._cover?c._cover:null;c.cover=a;return c}};
var D=["gm_vit_slider.js","gm_vit_itemMenu.js","gm_vit_modalWin.js?ver=2.1.0"],f=new w,C=f.trace,d=f.moduleSettings,h={EXT_SCRIPTS_READY:"EXT_SCRIPTS_READY",REQUEST_START:"REQUEST_START",TERMS_DATA_READY:"TERMS_DATA_READY",TERMS_COVER_HANDLER:"TERMS_COVER_HANDLER",COLLECTION_DATA_REDY:"COLLECTION_DATA_REDY",COUNTERS_UPDATED:"COUNTERS_UPDATED",NEED_MODAL:"NEED_MODAL",NEED_LIGHTBOX:"NEED_LIGHTBOX",REMOVE_LIGHTBOX:"REMOVE_LIGHTBOX",REMOVE_COLLECTION:"REMOVE_COLLECTION",NEED_NEW_COLLECTION:"NEED_NEW_COLLECTION",
NEED_NEW_COLLECTION_BY_TERM:"NEED_NEW_COLLECTION_BY_TERM",FULLSCREEN_SWITCH:"FULLSCREEN_SWITCH"};x.prototype={updateView:function(){var a=this.delegate.tagsCloud,b=[],c=[],e;for(e in a)"0"!=e&&b.push(a[e].toLowerCase());b.sort();b.splice(0,0,a["0"].toLowerCase());for(e=0;e<b.length;e++)for(var f in a)if(a[f].toLowerCase()==b[e]){var g=this.createTag(f,a[f]);c.push(g);this.list.appendChild(g);delete a[f]}this.selectedTag=document.getElementById(this.id+this.delegate.filtredById);this.selectedTag.style.backgroundColor=
d(this.appName).tagCloudTextColor;this.selectedTag.style.color=d(this.appName).tagCloudBgColor;this.selectedTag.style.cursor="default"},createTag:function(a,b){function c(a){var b=this.id.split("_")[this.id.split("_").length-1];if(e.selectedTag!=this)switch(a.type){case "click":e.selectedTag=document.getElementById(e.id+e.delegate.filtredById);e.selectedTag.style.color=d(e.appName).tagCloudTextColor;e.selectedTag.style.backgroundColor=d(e.appName).tagCloudBgColor;e.selectedTag.style.cursor="pointer";
e.delegate.filtred(b);e.selectedTag=document.getElementById(e.id+e.delegate.filtredById);e.selectedTag.style.cursor="default";break;case "mouseenter":this.style.backgroundColor=d(e.appName).tagCloudTextColor;this.style.color=d(e.appName).tagCloudBgColor;break;case "mouseleave":this!=e.selectedTag&&(this.style.color=d(e.appName).tagCloudTextColor,this.style.backgroundColor=d(e.appName).tagCloudBgColor)}}var e=this,f=document.createElement("li");f.appendChild(document.createTextNode(b));f.id=this.id+
a;f.style.color=d(this.appName).tagCloudTextColor;f.style.backgroundColor=d(this.appName).tagCloudBgColor;f.addEventListener("click",c,!1);f.addEventListener("mouseenter",c,!1);f.addEventListener("mouseleave",c,!1);return f}};m.prototype={init:function(){this.startRequest();f.request(JSON.stringify({library:this.query}),this,h.COLLECTION_DATA_REDY)},startRequest:function(){this.showPreloader(!0)},showPreloader:function(a){var b=void 0;if(a)document.getElementById(this.appName+"_term_preloader")||
(b=f.createPreloaderView(f.hexToRgbaStrin(d(this.appName).collectionPreloaderColor,.7)),b.id=this.appName+"_term_preloader",this.view.appendChild(b));else if(document.getElementById(this.appName+"_term_preloader")){var c=this;b=document.getElementById(this.appName+"_term_preloader");f.fadeOut(b,function(){c.view&&c.view.removeChild(b)},500)}},dataLoaded:function(a){if(a=a.params.data){try{var b=JSON.parse(a);b.key&&""!=b.key?d(this.appName).key=b.key:(d(this.appName).tv=document.createElement("div"),
d(this.appName).tv.style.position="absolute",d(this.appName).tv.style.height="24px",d(this.appName).tv.innerHTML='<a href="http://bit.ly/2snVAca" style="background-color: rgba(0, 0, 0, 0.8) !important;position: relative !important;left: auto!important;right: auto!important;top: auto!important;bottom: auto!important;width:auto!important;height:auto!important;text-indent:0!important;overflow:visible!important;display:block!important;padding: 4px 10px!important;margin:0 0 -3em 0!important;font-size:14px!important;line-height:120%!important;color:#FFFFFF!important;font-weight:bold!important;visibility:visible!important;opacity:1!important;pointer-events:auto!important;transform:none!important;">Trial version - Gmedia WP Plugin</a>');
a=[];if(b.properties){b.properties.category__in&&a.push(b.properties.category__in);b.properties.album__in&&a.push(b.properties.album__in);b.properties.tag__in&&a.push(b.properties.tag__in);if(1==a.length)for(key in a[0])this.term=f.Term(a[0][key],this.appName),this.terms.push(this.term);else 0==a.length&&b.properties.request&&"s"==b.properties.request.taxonomy&&b.properties.request.term_id&&(this.term=f.Term({name:b.properties.request.term_id,taxonomy:"s",count:b.properties.count},this.appName));
this.createTermsCollectionAndUpdateProperties(b.properties)}b.data&&this.addItemsToCollection(b.data)}catch(c){C(c)}this.showPreloader(!1);this.properties&&(this.viewWidth=this.view.clientWidth,this.updateViewByData())}},createTermsCollectionAndUpdateProperties:function(a){this.properties||(this.properties={});for(var b in a)if("album__in"==b||"categoy__in"==b||"tag__in"==b){var c=this.properties,d=b,k=void 0,g=a[b],l={};for(k in g){var h=f.Term(g[k],this.appName);l[h.term_id]=h}c[d]=l}else this.properties[b]=
a[b]},addItemsToCollection:function(a){this.lastPageItems=[];for(var b=0;b<a.length;b++){var c=f.Item(a[b],this.appName);c.index=this.itemsList.length+b;if(c.tags&&0<c.tags.length)for(var d=0;d<c.tags.length;d++){var k=c.tags[d];this.tagsCloud&&(this.tagsCloud[k.term_id]=k.name)}this.lastPageItems.push(c)}this.itemsList=this.itemsList.concat(this.lastPageItems)},getItemIndexByID:function(a){for(var b=0;b<this.filteredCollection.length;b++)if(this.filteredCollection[b].ID==a)return b;return 0},itemAction:function(a,
b){if(!this.dragging){var c=this.filteredCollection[a];switch(b){case "lightBox":d(this.appName).appEventManager.dispatchGMEvent(f.GMEvent(h.NEED_LIGHTBOX,this,{collection:this,index:a}));break;case "share":d(this.appName).appEventManager.dispatchGMEvent(f.GMEvent(h.NEED_MODAL,self,{type:"share",item:c}));break;case "link":c.link&&window.open(c.link,d(this.appName).linkTargetWindow);break;case "coments":window.open(c.sharelink+"/#comments",d(this.appName).linkTargetWindow);break;case "like":this.delegate.likeItem=
c;break;case "bookmark":this.delegate.bookmarkItem=c}}},refteshDataInItem:function(){for(var a=0;a<this.filteredCollection.length;a++)this.filteredCollection[a].view.updateSomeData()},activate:function(){this.updateLayout();(this.scrollHandler=this.scrollHandlerFunction())&&window.addEventListener("scroll",this.scrollHandler,!1)},deactivate:function(){d(this.appName).appEventManager.removeGMEventListener(h.COLLECTION_DATA_REDY,this,"dataLoaded");window.removeEventListener("scroll",this.scrollHandler,
!1);this.scrollHandler=void 0;this.removePresentedItems()},removeItemViewFormStage:function(){this.removePresentedItems();this.presentedList=[];this.currentPage=void 0},removePresentedItems:function(){for(var a=0;a<this.presentedList.length;a++)this.presentedList[a].display="none"},showPresentedItems:function(){for(var a=0;a<this.presentedList.length;a++)this.presentedList[a].display="block"},createLayout:function(){this.scrollHandler||(this.scrollHandler=this.scrollHandlerFunction())&&(window.addEventListener?
window.addEventListener("scroll",this.scrollHandler,!1):window.attachEvent&&window.attachEvent("onscroll",this.scrollHandler));this.page_Amount=Math.min(20,this.filteredCollection.length)},updateLayout:function(){},scrollHandlerFunction:function(){var a=this;return function(){200>a.bottomSpace&&a.addPageToStage()}},get bottomSpace(){return this.content.getBoundingClientRect().bottom-window.innerHeight},resize:function(){var a=this;clearTimeout(this.resizeTimeOut);f.is_touch_device?this.resizeTimeOut=
setTimeout(function(){a.resizeDelay()},150):this.resizeDelay()},resizeDelay:function(){this.viewWidth!=this.view.clientWidth&&(this.updateLayout(),this.viewWidth=this.view.clientWidth)},filtred:function(a){window.removeEventListener("scroll",this.scrollHandler,!1);this.scrollHandler=void 0;this.removeItemViewFormStage();this.filtredById=a;this.createLayout()},updateTagsCloud:function(){0!=this.filteredCollection.length&&(this.tagsCloudView||(this.tagsCloudView=new x(this),this.header.appendChild(this.tagsCloudView.view)),
this.tagsCloud&&this.tagsCloudView.updateView())},set filtredById(a){if(this.itemsList&&(this.filteredList=[],this._filter=a,0!==a))for(var b=0;b<this.itemsList.length;b++){var c=this.itemsList[b];c.hasTag(a)&&this.filteredList.push(c)}},get filtredById(){return this._filter},get filteredCollection(){return 0<this.filteredList.length?this.filteredList:this.itemsList}};y.prototype={init:function(){function a(a){switch(a.type){case "mouseenter":this.classList.add("hover");f.updateForItem(b);c.menuHolder.appendChild(f.view);
break;case "mouseleave":this.classList.remove("hover")}}var b=this.delegate.itemsList[this.index];this.thumbSize=b.itemViewThumbSize;this.type=b.type;this.itemViewSrc=!1;this.img=new Image;var c=this;this.img.onload=function(){this.setAttribute("alt",b.title);"audio"!=c.type&&1.1<c.view.clientWidth/this.naturalWidth&&b.itemViewSrc&&!c.itemViewSrc?(this.src=b.itemViewSrc,c.itemViewSrc=!0):(c.view.style.opacity=this._opacity,c.view.style.minHeight=null,c.imgCompleted=!0)};this.view.appendChild(this.img);
this.img.src=b.itemViewThumbSrc;this.hover=document.createElement("div");this.hover.className="gmedia_AlbumsListMasonry_MasonryCollection_Item_Hover";this.hover.style.backgroundColor=d(this.appName).collectionThumbHoverColor;this.hover.style.top=this.hover.style.bottom=this.hover.style.left=this.hover.style.right=this.space;this.view.appendChild(this.hover);this.inner=document.createElement("div");this.inner.className="gmedia_AlbumsListMasonry_MasonryCollection_Item_Inner";this.inner.style.top=this.inner.style.bottom=
this.inner.style.left=this.inner.style.right=this.space;this.view.appendChild(this.inner);if(d(this.appName).lightBoxEnable){this.inner.style.cursor="zoom-in";this.inner.addEventListener("click",function(a){"gmedia_AlbumsListMasonry_MasonryCollection_Item_Inner"==a.target.className&&(c.view.classList.remove("hover"),c.delegate.itemAction(c.index,"lightBox"))});var e=document.createElement("div");e.className="gm_item_badge";switch(b.type){case "video":"vimeo"==b.mime_type.split("/")[1]?(e.innerHTML=
'<svg enable-background="new 0 0 56.693 56.693" height="56.693px" id="Layer_1" version="1.1" viewBox="-5 -5 66.693 66.693" width="56.693px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M3.602,22.974l2.01,2.636c0,0,4.146-3.267,5.528-1.634c1.382,1.634,6.656,21.357,8.417,24.997  c1.537,3.192,5.777,7.413,10.426,4.397c4.646-3.014,20.098-16.205,22.863-31.781c2.764-15.574-18.594-12.313-20.854,1.256  c5.652-3.395,8.671,1.38,5.778,6.784c-2.889,5.399-5.527,8.921-6.908,8.921c-1.379,0-2.441-3.612-4.021-9.928  c-1.635-6.53-1.624-18.291-8.416-16.958C12.019,12.921,3.602,22.974,3.602,22.974z"/></svg>',
e.firstChild.style.fill="#00adef"):(e.innerHTML='<svg data-name="Layer 21" height="24" id="Layer_21" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><title/><path d="M21.80731,7.805a2.79915,2.79915,0,0,0-2.54907-2.53906C17.69061,5.13586,15.36707,5,12.50012,5c-3.45251,0-6.05865.14105-7.74353.27332A2.79932,2.79932,0,0,0,2.1925,7.815C2.08936,8.90021,2,10.33344,2,12.0423c0,1.66632.08862,3.07422.19128,4.14594a2.79852,2.79852,0,0,0,2.56384,2.53833C6.43994,18.85883,9.04657,19,12.50012,19c2.86694,0,5.19049-.13586,6.75812-.266a2.799,2.799,0,0,0,2.54907-2.539C21.91052,15.11548,22,13.69189,22,12S21.91052,8.88452,21.80731,7.805ZM9.77594,14.93878V9.06122L15.574,12Z"/></svg>',
e.firstChild.style.fill="#e02f2f");this.inner.appendChild(e);break;case "audio":e.innerHTML='<svg version="1.1" viewBox="0 0 58 94" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M37.992,0h-8.021v65.358c-4.435-1.706-10.174-1.73-15.835,0.328C3.994,69.377-2.049,78.355,0.638,85.736   c2.688,7.383,13.088,10.374,23.229,6.683c8.614-3.134,14.249-10.082,14.111-16.626l0.014-53.451   c13.986,2.204,14.943,19.884,13.268,24.842c-0.636,1.879,0.484,3.286,2.598,0C68.938,23.726,37.992,13.376,37.992,0z"/></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg>',
e.firstChild.style.fill="#4a4a4a",this.inner.appendChild(e)}}this.menuHolder=document.createElement("div");this.menuHolder.className="gmedia_AlbumsListMasonry_MasonryCollection_Item_MenuHolder";this.inner.appendChild(this.menuHolder);d(this.appName).collectionThumbTitleShow&&b.title&&0<b.title.length&&(e=document.createElement("div"),e.className="item_title",e.innerHTML=b.title,this.inner.appendChild(e));var f=this.delegate.itemMenu;f&&(this.view.addEventListener("mouseenter",a,!1),this.view.addEventListener("mouseleave",
a,!1))},set display(a){"none"==a&&clearTimeout(this.opacityDelay);this._display=this.view.style.display=a;this.imgCompleted||(this.view.style.minHeight=this.thumbSize.height/this.thumbSize.width*this.view.clientWidth+"px")},get display(){return this._display},set opacity(a){var b=this;a.delay?this.opacityDelay=setTimeout(function(){b.view.style.opacity=a.opacity;b._opacity=a.opacity},a.delay):(clearTimeout(this.opacityDelay),b.view.style.opacity=a.opacity,b._opacity=a.opacity)}};u.prototype=Object.create(m.prototype,
{updateViewByData:{value:function(){if(this.lastPageItems&&0<this.lastPageItems.length)for(var a=0;a<this.lastPageItems.length;a++){var b=new y(this,this.lastPageItems[a].index);this.lastPageItems[a].view=b;b.init()}d(this.appName).tagsFilter&&this.updateTagsCloud();this.createLayout();this.delegate.startItem&&(a=this.getItemIndexByID(this.delegate.startItem),0!==a&&this.itemAction(a,"lightBox"))}},createLayout:{value:function(){m.prototype.createLayout.apply(this,arguments);this.createColumns();
this.addPageToStage()}},updateLayout:{value:function(){if(0==this.createColumns())this.presentedList&&this.presentedList[0]&&"none"==this.presentedList[0].display&&this.showPresentedItems();else{this.removePresentedItems();for(var a=0;a<this.presentedList.length;a++)this.arangeItemToColum(this.presentedList[a])}}},createColumns:{value:function(){var a=Math.floor(this.content.clientWidth/Math.min(this.content.clientWidth,d(this.appName).collectionThumbRecomendedWidth));if(this.columnsArr.length!=a){for(var b=
0;b<this.columnsArr.length;b++)this.content.removeChild(this.columnsArr[b]);this.columnsArr=[];this.columnsHeightsArr=[];for(b=0;b<a;b++){var c=document.createElement("div");c.className="collectionColumn";c.style.width=100/a+"%";this.columnsArr.push(c);this.columnsHeightsArr.push(0);this.content.appendChild(c)}return!0}return!1}},addPageToStage:{value:function(){void 0===this.currentPage&&(this.currentPage=0);clearTimeout(this.layoutSizerDelay);if(!(this.currentPage>=Math.ceil(this.filteredCollection.length/
this.page_Amount))){for(var a=this.currentPage*this.page_Amount,b=Math.min(a+this.page_Amount,this.filteredCollection.length),c=1;a<b;a++){var d=this.filteredCollection[a].view;d.index=a;d.opacity={opacity:0,delay:0};this.addItemToStage(d);d.opacity={opacity:1,delay:100*c};c+=1}this.currentPage+=1;var f=this;this.layoutSizerDelay=setTimeout(function(){200>f.bottomSpace&&f.addPageToStage()},1E3)}}},getColumWithMinHeight:{value:function(){for(var a=this.columnsHeightsArr[0],b=0,c=1;c<this.columnsHeightsArr.length;c++)a!=
Math.min(a,this.columnsHeightsArr[c])&&(a=Math.min(a,this.columnsHeightsArr[c]),b=c);return b}},removePresentedItems:{value:function(){m.prototype.removePresentedItems.apply(this,arguments);for(var a in this.columnsHeightsArr)this.columnsHeightsArr[a]=0}},arangeItemToColum:{value:function(a){var b=a.view,c=this.getColumWithMinHeight();this.columnsHeightsArr[c]+=a.thumbSize.height/a.thumbSize.width*this.itemWidth;this.columnsArr[c].appendChild(b);a.display="block"}},addItemToStage:{value:function(a){this.arangeItemToColum(a);
this.presentedList.push(a)}},itemWidth:{get:function(){var a=Math.floor(this.content.clientWidth/d(this.appName).collectionThumbRecomendedWidth);return this.content.clientWidth/a}}});u.prototype.constructor=u;z.prototype={addToStage:function(){var a=this;this.windowScrollY=window.scrollY;var b=document.getElementsByTagName("body")[0],c=document.getElementsByTagName("html")[0];c.classList.add("gmedia_AlbumsListMasonry_PopUpActiveTransition");c.classList.add("gmedia_AlbumsListMasonry_CollectionPopUpActive");
this.view.style.zIndex=f.findHighestZIndex(b)+1;b.appendChild(this.view);f.disableBodyScroll();var d=a.header.clientHeight,k=window.innerHeight;a.content.style.minHeight=f.is_touch_device?k-d+1+"px":k-d+"px";setTimeout(function(){a.animeBG.style.transform="translateY(0px)";a.header.style.transform="translateY(0px)"},3);setTimeout(function(){window.scrollTo(0,0);a.bodyElements=f.collapseElementsInElemt(b,a.view);c.classList.remove("gmedia_AlbumsListMasonry_PopUpActiveTransition");a.view.classList.add("gmContent");
a.content.style.visibility="visible";a.createCollectionView()},700);document.addEventListener("keydown",a.keydownHandler(),!1);this.scrollHandler=this.scrollControll();window.addEventListener("scroll",this.scrollHandler)},prepareToRemove:function(){var a=this;a.delegate.modal?a.delegate.modal.prepareToRemove():a.delegate.slider?a.delegate.slider.prepareToRemove():!this.removing&&this.gallery&&(this.removing=!0,this.delegate.removeCollectionDeepLink(this.term),this.gallery.deactivate(),this.header.style.visibility=
"hidden",this.fixedHeader.style.visibility="hidden",this.content.style.opacity="0",delete this.gallery,document.removeEventListener("keydown",this.handlerKB),window.removeEventListener("scroll",this.scrollHandler),document.getElementsByTagName("html")[0].classList.remove("gmedia_AlbumsListMasonry_CollectionPopUpActive"),f.recoverElements(a.bodyElements),a.bodyElements.length=0,a.view.classList.remove("gmContent"),window.scrollTo(0,a.windowScrollY),a.animeBG.style.transform="translateY(-100%)",f.enableBodyScroll(),
setTimeout(function(){d(a.appName).appEventManager.dispatchGMEvent(f.GMEvent(h.REMOVE_COLLECTION,null))},500))},keydownHandler:function(a){var b=this;b.handlerKB=function(a){switch(a.keyCode){case 27:b.prepareToRemove()}};return b.handlerKB},scrollControll:function(){var a=this.header.clientHeight-30,b=this;return function(c){window.pageYOffset>a?b.showFixedHeader(!0):b.showFixedHeader(!1)}},showFixedHeader:function(a){this.isShowFixedHeder!=a&&(a?(this.header.style.minHeight=this.header.clientHeight+
"px",this.title&&this.fixedHeader.appendChild(this.title),this.shareMenu&&this.fixedHeader.appendChild(this.shareMenu),this.closeButton&&this.fixedHeader.appendChild(this.closeButton),this.fixedHeader.classList.add("gmShow")):(this.fixedHeader.classList.remove("gmShow"),this.title&&this.header.insertBefore(this.title,this.header.childNodes[0]),this.shareMenu&&this.header.appendChild(this.shareMenu),this.closeButton&&this.header.appendChild(this.closeButton),this.header.style.minHeight=null),this.isShowFixedHeder=
a)},createCollectionView:function(){this.gallery=new u(this.delegate,this.appName,this.term.query);this.content.appendChild(this.gallery.view);this.gallery.init()},resizeHandler:function(){this.gallery&&this.gallery.resize()}};v.prototype={updateTermData:function(){this.term&&(this.coumnter&&(this.coumnter.innerHTML="- "+this.term.count+" -"),this.view.id=this.term.key+"_"+this.term.listIndex)},showTermsCollectioHandler:function(a){this.shareClick?(d(this.appName).appEventManager.dispatchGMEvent(f.GMEvent(h.NEED_MODAL,
self,{type:"share",item:this.term})),this.shareClick=!1):d(this.appName).appEventManager.dispatchGMEvent(f.GMEvent(h.NEED_NEW_COLLECTION_BY_TERM,self,{term:this.term}))},set rotationTransform(a){var b=a.x/this.selfRect.width*10;a=10*-(a.y/this.selfRect.height);var c=5*Math.sqrt(Math.pow(a,2)+Math.pow(b,2));this.imgHolder&&(this.imgHolder.style.transform="rotateY("+b+"deg) rotateX("+a+"deg)");this.hoverArea.style.transform="rotateY("+b+"deg) rotateX("+a+"deg) translateZ("+c+"px)"},startRender:function(a){function b(){p=
.2*p+.15*(m-l.rotationTransformX);q=.2*q+.15*(r-l.rotationTransformY);l.rotationTransformX+=p;l.rotationTransformY+=q;l.rotationTransform=f.Point(l.rotationTransformX,l.rotationTransformY);.07>Math.abs(p)&&.07>Math.abs(q)&&h?cancelAnimationFrame(t):t=requestAnimationFrame(b)}function c(a){a.preventDefault();h||(m=a.clientX-l.selfRect.x,r=a.clientY-l.selfRect.y)}function e(a){a.preventDefault();l.view.classList.remove("render");l.imgHolder&&(l.hoverBG.style.opacity="0.01");document.removeEventListener("mousemove",
c,!1);l.view.removeEventListener("mouseleave",e,!1);document.removeEventListener("mousedown",k,!1);document.removeEventListener("mouseup",g,!1);r=m=0;h=!0}function k(a){h=!0;r=m=0}function g(a){h=!1;t=requestAnimationFrame(b)}var l=this,h=!1,m=0,r=0,p=0,q=0,t=void 0;return function(a){l.view.classList.add("render");l.selfRect=f.Rect(l.view.getBoundingClientRect().left+l.view.clientWidth/2,l.view.getBoundingClientRect().top+l.view.clientHeight/2,l.view.clientWidth/2,l.view.clientHeight/2);f.is_touch_device||
a.preventDefault();a.button&&0!==a.button||(cancelAnimationFrame(t),q=p=0,m=a.clientX-l.selfRect.x,r=a.clientY-l.selfRect.y,d(l.appName).coverHoverEffectEnable&&(document.addEventListener("mousemove",c,!1),document.addEventListener("mousedown",k,!1),document.addEventListener("mouseup",g,!1)),l.view.addEventListener("mouseleave",e,!1),l.imgHolder&&(l.hoverBG.style.opacity="1"),h=!1,d(l.appName).coverHoverEffectEnable&&(t=requestAnimationFrame(b)))}},set frame(a){this._frame=f.Rect(a.x,a.y,a.width,
a.height);this.view.style.left=a.x+"px";this.view.style.top=a.y+"px";this.view.style.width=a.width+"px";this.view.style.height=a.height+"px";this.view.style.perspective=600<Math.max(a.width,a.height)?"2000px":"1000px";this.title&&(this.title.style.fontSize=160>a.width?d(this.term.appName).coverTitleFontSize-8+"px":d(this.term.appName).coverTitleFontSize+"px",this.title.style.maxWidth=a.width-10+"px");this.thumbImg&&(a=400>Math.max(a.width,a.height)?this.coverSrc[0]:this.coverSrc[1],this.thumbImg.src!=
a&&(this.thumbImg.src=a),this.resizeCover())},get frame(){return this._frame},thumbLoad:function(a){var b=this;this.coverImgSize=f.Size(this.thumbImg.naturalWidth,this.thumbImg.naturalHeight);this.resizeCover();this.thumbImg.style.opacity="1";setTimeout(function(){b.view.style.backgroundImage=null},600)},resizeCover:function(){if(this.coverImgSize){var a=f.getFrameForBoxWithMode(this.coverImgSize,f.Size(this._frame.width,this._frame.height),!0,!1);this.thumbImg.style.left=a.x+"px";this.thumbImg.style.top=
a.y+"px";this.thumbImg.style.width=a.width+"px";this.thumbImg.style.height=a.height+"px"}}};A.prototype={init:function(){this.showPreloader(!0);this.viewWidth=this.view.clientWidth},showPreloader:function(a){var b=void 0;if(a)document.getElementById(this.appName+"_splash_preloader")||(b=f.createPreloaderView(f.hexToRgbaStrin(d(this.appName).splashPreloaderColor,.7)),b.id=this.appName+"_splash_preloader",this.view.appendChild(b));else if(document.getElementById(this.appName+"_splash_preloader")){var c=
this;b=document.getElementById(this.appName+"_splash_preloader");f.fadeOut(b,function(){c.view&&c.view.removeChild(b)},500)}},createCovers:function(){this.showPreloader(!1);for(var a=this.delegate.termsList,b=0;b<a.length;b++){var c=a[b];c.viewData||(c.viewData=new v(c));this.view.appendChild(c.viewData.view);this.coversList.push(c)}this.arangeCovers()},removeCoverByID:function(a){for(var b=0;b<this.coversList.length;b++)if(this.coversList[b]._term_id==a){var c=this.coversList[b];c.viewData&&c.viewData.view.parentNode&&
c.viewData.view.parentNode.removeChild(c.viewData.view);this.coversList.splice(b,1);b=this.coversList.length}this.arangeCovers()},addCoverToIndex:function(a,b){a.viewData=new v(a);this.view.appendChild(a.viewData.view);this.coversList.splice(b,0,a);this.arangeCovers()},arangeCovers:function(){var a=this.coversList,b=this.view.clientWidth;if(0<a.length){d(this.appName);this.gmediaTemplate&&(this.view.style.margin="20px",this.view.style.width=window.innerWidth-40+"px");for(var c=0;c<a.length;c++){this.view.clientWidth!=
b&&(b=this.view.clientWidth,c=0);var e=a[c].viewData;e.frame=f.getItemFrameByIndexForBox(c,this.view.clientWidth,d(this.appName).spaceX,d(this.appName).spaceX,d(this.appName).thumbRecommendedSize,d(this.appName).coverThumbRatio)}e&&(this.view.style.height=e.frame.y+e.frame.height+"px")}},resizeHandler:function(){this.view.clientWidth!=this.viewWidth&&(this.viewWidth=this.view.clientWidth,this.arangeCovers())}};B.prototype={externalScriptsReady:function(a){"function"===typeof window.codeasily_v2_itemMenu&&
(this.itemMenuConstructor=window.codeasily_v2_itemMenu);"function"===typeof window.codeasily_v2_slider&&(this.sliderConstructor=window.codeasily_v2_slider);"function"===typeof window.codeasily_v2_modalWin&&(this.modalWinConstructor=window.codeasily_v2_modalWin);d(this.appName).appEventManager.removeGMEventListener(h.EXT_SCRIPTS_READY,this,"externalScriptsReady");this.startApp()},startApp:function(){var a=this;this.viewsSet={};d(this.appName).appEventManager.addGMEventListener(h.COUNTERS_UPDATED,this,
"itemsCountersUpdateHandler");this.likesSet={};window.localStorage.getItem("gm_likesSet")&&(this.likesSet=JSON.parse(window.localStorage.getItem("gm_likesSet")));this.popstateHandler=function(){if(a.slider)a.slider.prepareToRemove();else if(a.currentCollection)if(a.itemFromHash){var b=a.currentCollection.gallery,e=b.getItemIndexByID(a.itemFromHash);d(a.appName).appEventManager.dispatchGMEvent(f.GMEvent(h.NEED_LIGHTBOX,a,{collection:b,index:e}))}else a.currentCollection.prepareToRemove();else a.addCollectionoFromHash()};
window.addEventListener("popstate",this.popstateHandler,!1);d(this.appName).appEventManager.addGMEventListener(h.NEED_NEW_COLLECTION,this,"pushNewCollectionByTermID");d(this.appName).appEventManager.addGMEventListener(h.NEED_NEW_COLLECTION_BY_TERM,this,"pushNewCollectionByTerm");d(this.appName).appEventManager.addGMEventListener(h.NEED_MODAL,this,"createModal");d(this.appName).lightBoxEnable&&(d(this.appName).appEventManager.addGMEventListener(h.NEED_LIGHTBOX,this,"createLightbox"),d(this.appName).appEventManager.addGMEventListener(h.REMOVE_LIGHTBOX,
this,"removeLightbox"));d(this.appName).appEventManager.addGMEventListener(h.REMOVE_COLLECTION,this,"removeCollectionHandler");window.addEventListener("resize",function(){a.windowResizeHandler(a)});this.createAudioPlayer();this.termsList=[];this.currentCollection=void 0;d(this.appName).bookmarkEnable&&(this.bookmarkSet=[],window.localStorage.getItem("gm_bookmarkSet")&&(this.bookmarkSet=JSON.parse(window.localStorage.getItem("gm_bookmarkSet"))),0<this.bookmarkSet.length&&this.termsList.splice(0,0,
this.createGmediaInTerm(this.bookmarkSet,d(this.appName).coverTitleForBookmark,"mybookmarks")));if(this.appQuery.gmedia__in){var b={};f.copyProperties(this.appQuery,b);b.album__in&&delete b.album__in;b.category__in&&delete b.category__in;b.tag__in&&delete b.tag__in;d(this.appName);b=f.termDataByQueryNameId(b,d(this.appName).coverTitleForPreferred,"gmCustomCollection");b=f.Term(b,this.appName);b.key="myCollection";this.termsList[0]&&"myCollection"==this.termsList[0].key?this.termsList.splice(1,0,b):
this.termsList.splice(0,0,b);this.appQuery.album__in||this.appQuery.category__in||this.appQuery.tag__in?(delete this.appQuery.gmedia__in,this.getTermsList(this.appQuery)):(this.addCollectionFormHashStartApp(),this.splashPage.createCovers())}else this.getTermsList(this.appQuery)},getTermsList:function(a){var b=[],c=[],e;for(e in a)switch(e){case "album__in":b.push("gmedia_album");c=c.concat(a[e].split(","));break;case "category__in":b.push("gmedia_category");c=c.concat(a[e].split(","));break;case "tag__in":b.push("gmedia_tag"),
c=c.concat(a[e].split(","))}d(this.appName).appEventManager.addGMEventListener(h.TERMS_DATA_READY,this,"termsLoaded");f.request(JSON.stringify({library_terms:{taxonomy:b,include:c}}),this,h.TERMS_DATA_READY)},createGmediaInTerm:function(a,b,c){a=f.termDataByQueryNameId({orderby:"gmedia__in",order:"ASC",gmedia__in:a.toString()},b,c);a=f.Term(a,this.appName);a.key="myCollection";return a},termsLoaded:function(a){if(a.params||a.params.data)try{var b=function(a){if(e[a]&&e[a].data)for(var b=e[a].data,
d=0;d<b.length;d++){var h=f.Term(b[d],c.appName);h.key=a;c.termsList.push(h)}},c=this,e=JSON.parse(a.params.data);e.key&&""!=e.key?d(this.appName).key=e.key:(d(this.appName).tv=document.createElement("div"),d(this.appName).tv.style.position="absolute",d(this.appName).tv.style.height="24px",d(this.appName).tv.innerHTML='<a href="http://bit.ly/2snVAca" style="background-color: rgba(0, 0, 0, 0.8) !important;position: relative !important;left: auto!important;right: auto!important;top: auto!important;bottom: auto!important;width:auto!important;height:auto!important;text-indent:0!important;overflow:visible!important;display:block!important;padding: 4px 10px!important;margin:0 0 -3em 0!important;font-size:14px!important;line-height:120%!important;color:#FFFFFF!important;font-weight:bold!important;visibility:visible!important;opacity:1!important;pointer-events:auto!important;transform:none!important;">Trial version - Gmedia WP Plugin</a>');
e.albums&&b("albums");e.categories&&b("categories");e.tags&&b("tags");this.addCollectionFormHashStartApp();this.splashPage.createCovers()}catch(k){C(k)}finally{}},pushNewCollectionByTerm:function(a){a.params.term&&this.addCollectioByTerm(a.params.term)},get termFromHash(){var a=window.location.hash.indexOf(this.appName+"-"),b=void 0;a+1&&(b=3<=window.location.hash.substr(a).split("-").length?window.location.hash.substr(a).split("-"):void 0);if(b&&0!=this.termsList.length){if("gmedia__in"==b[1]&&b[2]){a=
b[2].split(",");if("mybookmarks"==this.termsList[0]._term_id){if(this.termsList[0].gmedia__in.toString()===b[2])return this.termsList[0];b=this.createGmediaInTerm(a,d(this.appName).coverTitleForPreferred,"gmCustomCollection");this.termsList.splice(1,0,b);return b}if(this.termsList[0].gmedia__in.toString()===b[2])return this.termsList[0];b=this.createGmediaInTerm(a,d(this.appName).coverTitleForPreferred+" "+(this.termsList.length+1),"gmCustomCollection");this.termsList.splice(this.termsList.length,
0,b);return b}b=b[2];for(a=0;a<this.termsList.length;a++){var c=this.termsList[a];if(c.term_id==b)return c}}},get itemFromHash(){var a=window.location.hash.indexOf(this.appName+"-"),b=void 0;a+1&&(b=4<=window.location.hash.substr(a).split("-").length?window.location.hash.substr(a).split("-")[3]:void 0);return b},addCollectionFormHashStartApp:function(){this.startItem=this.itemFromHash;var a=this.termFromHash;a&&(window.history.replaceState("",document.title,window.location.pathname+window.location.search),
this.addCollectioByTerm(a))},addCollectionoFromHash:function(){var a=this.termFromHash;a&&this.addCollectioByTerm(a)},collectionHash:function(a){return"#"+this.appName+"-"+a.taxony_type+"-"+("mybookmarks"==a._term_id||"gmCustomCollection"==a._term_id?a.gmedia__in:a.term_id)},addCollectioByTerm:function(a){a&&(this.currentCollection=new z(a,this),a=this.collectionHash(a),window.location.hash!=a&&window.history.pushState(null,null,a))},removeCollectionHandler:function(a){this.currentCollection&&(this.currentCollection.view&&
this.currentCollection.view.parentNode&&this.currentCollection.view.parentNode.removeChild(this.currentCollection.view),document.getElementById("gmAudioPlayer")&&document.getElementById("gmAudioPlayer").pause(),this.currentCollection=void 0)},removeCollectionDeepLink:function(a){this.termFromHash?window.history.back():window.history.replaceState(null,null,window.location.pathname+window.location.search)},createLightbox:function(a){if(a.params||a.params.collection){var b=a.params.collection;a=a.params.index;
this.slider&&this.slider.prepareToRemove();window.localStorage.getItem("gm_likesSet")&&(this.likesSet=JSON.parse(window.localStorage.getItem("gm_likesSet")));this.sliderConstructor&&(this.slider=this.sliderConstructor(this,f),this.slider.initByList(b.filteredCollection,a));b=this.collectionHash(this.currentCollection.term)+"-0";window.location.hash!=b&&window.history.pushState(null,null,b)}},updateItemLink:function(a){a=this.collectionHash(this.currentCollection.term)+"-"+a.ID;window.history.replaceState(null,
null,a)},removeLightbox:function(a){var b=this,c=a.target;setTimeout(function(){c.view&&c.view.parentNode&&c.view.parentNode.removeChild(c.view);b.slider&&(b.slider=void 0)},400);this.itemFromHash?window.history.back():this.currentCollection?(a=this.collectionHash(this.currentCollection.term),window.history.replaceState(null,null,a)):window.history.replaceState(null,null,window.location.pathname+window.location.search)},createModal:function(a){if(a.params.type&&a.params.item){var b=a.params.item,
c=void 0;this.modal||(this.modal=this.modalWinConstructor(this,f));this.modal.type=a.params.type;switch(a.params.type){case "share":c=this.modal.shareBar;break;case "info":c=this.modal.infoBar}c.item=b;this.modal.pushPage(c.view)}},deleteModal:function(){this.modal&&delete this.modal},is_containIdInBookmarkSet:function(a){for(var b=0;b<this.bookmarkSet.length;b++)if(this.bookmarkSet[b]==a)return b;return!1},set bookmarkItem(a){if(!a)return!1;a=a.ID;var b=this.is_containIdInBookmarkSet(a);if(b||0===
b)return this.bookmarkSet.splice(b,1),this.updateTermsList(),!1;this.bookmarkSet.push(a);this.updateTermsList();return!0},updateTermsList:function(){window.localStorage.setItem("gm_bookmarkSet",JSON.stringify(this.bookmarkSet));for(var a=void 0,b=0;b<this.termsList.length;b++){var c=this.termsList[b];"mybookmarks"==c._term_id&&(a=c,b=this.termsList.length)}if(a||0!=this.bookmarkSet.length)0==this.bookmarkSet.length?a&&(this.splashPage.removeCoverByID("mybookmarks"),this.termsList.splice(0,1)):a?(a.gmedia__in=
this.bookmarkSet,a.viewData.updateTermData()):(a=this.createGmediaInTerm(this.bookmarkSet,d(this.appName).coverTitleForBookmark,"mybookmarks"),this.termsList.splice(0,0,a),this.splashPage.addCoverToIndex(a,0))},set likeItem(a){a&&(a.meta.likes||(a.meta.likes=0),a.meta.likes=parseInt(a.meta.likes)+1,a.view&&a.view.like&&(a.view.like=!0),a=a.ID,this.likesSet[a]||(this.likesSet[a]="like",this.viewsSet[a]&&delete this.viewsSet[a],a=JSON.stringify({counter:{likes:[a],views:[a]}}),f.request(a,this,h.COUNTERS_UPDATED),
window.localStorage.setItem("gm_likesSet",JSON.stringify(this.likesSet))))},set viewItem(a){var b=a.ID;this.updateItemLink(a);this.viewsSet[b]="view"},itemsCountersUpdate:function(){if(this.viewsSet){var a=[];for(key in this.viewsSet)a.push(key);0<a.length&&(a=JSON.stringify({counter:{likes:[],views:a}}),f.request(a,this,h.COUNTERS_UPDATED),this.viewsSet={})}},itemsCountersUpdateHandler:function(a){window.localStorage.setItem("gm_likesSet",JSON.stringify(this.likesSet))},windowResizeHandler:function(a){this.splashPage&&
this.splashPage.resizeHandler();this.collection&&this.collection.resizeHandler();this.slider&&this.slider.resizeHandler()},createAudioPlayer:function(){var a=this;var b=document.getElementById("gmAudioPlayer")?document.getElementById("gmAudioPlayer"):new Audio;if(null!=b&&b.canPlayType&&b.canPlayType("audio/mpeg")){var c=function(b){a.slider&&a.slider.audioPlayerHandler(b)};b.id="gmAudioPlayer";b.setAttribute("type","audio/mpeg");b.setAttribute("codecs","mp3");this.audioPlayer=b;this.appDiv.appendChild(this.audioPlayer);
b.addEventListener("ended",c,!1);b.addEventListener("pause",c,!1);b.addEventListener("play",c,!1);b.addEventListener("durationchange",c,!1)}}};(function(){for(var a=document.body.getElementsByClassName("albumsListMasonry_module"),b=0;b<a.length;b++){var c=a[b].id;this[c]=new B(this[c],c,a[b])}})()}codeasily_albumsListMasonrr_module();
